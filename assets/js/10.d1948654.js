(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{408:function(a,e,n){"use strict";n.r(e);var t=n(56),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"domain"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#domain"}},[a._v("#")]),a._v(" Domain")]),a._v(" "),n("h2",{attrs:{id:"directory-structure"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#directory-structure"}},[a._v("#")]),a._v(" Directory Structure")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("├── domain_name\n│   ├── i_domain_name_repository.dart\n│   ├── domain_name.dart\n│   ├── domain_name_freezed.dart (generated)\n│   ├── domain_name_failure.dart\n│   ├── domain_name_failure_freezed.dart (generated)\n│   └── value_objects.dart\n")])])]),n("ul",[n("li",[n("code",[a._v("domain_name/i_domain_name_repository.dart")]),a._v(": merupakan "),n("em",[n("strong",[a._v("interface")])]),a._v(" yang dibuat untuk mengatur object domain.")]),a._v(" "),n("li",[n("code",[a._v("domain_name/domain_name.dart")]),a._v(": merupakan object domain itu sendiri. Class ini yang nantinya digunakan pada "),n("RouterLink",{attrs:{to:"/architecture/presentation.html"}},[a._v("Presentation layer")])],1),a._v(" "),n("li",[n("code",[a._v("domain_name/domain_name_failure.dart")]),a._v(": merupakan kumpulan "),n("em",[a._v("possible failure")]),a._v(" yang terjadi pada domain ini.")]),a._v(" "),n("li",[n("code",[a._v("domain_name/value_objects.dart")]),a._v(": merupakan "),n("em",[a._v("property")]),a._v(" atau "),n("em",[a._v("atribut")]),a._v(" dari domain.")])]),a._v(" "),n("h2",{attrs:{id:"value-objects"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#value-objects"}},[a._v("#")]),a._v(" Value Objects")]),a._v(" "),n("p",[a._v("Pada file ini kita mewajibkan untuk mendefinisikan "),n("em",[n("strong",[a._v("atribut")])]),a._v(" atau "),n("em",[n("strong",[a._v("property")])]),a._v(" dari Domain. Dengan mendefinisikan suatu object kita dapat menentukan "),n("strong",[a._v("boundaries")]),a._v(" dari sebuah Domain.")]),a._v(" "),n("h3",{attrs:{id:"source-code"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#source-code"}},[a._v("#")]),a._v(" Source Code")]),a._v(" "),n("p",[a._v("Untuk pembuatan "),n("code",[a._v("value_object")]),a._v(" menggukanan code seperti ini")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("class ClassName extends ValueObject<DataType> {\n  @override\n  final Either<ValueFailure<DataType>, DataType> value;\n\n  factory ClassName (DataType input) {\n    // aturan atau boundaries dari object\n   return ProductName._(validateStringNotEmpty(input));\n  }\n\n  const ClassName ._(this.value);\n}\n\n")])])]),n("p",[a._v("jika ingin membuat aturan lebih dari satu untuk sebuah objek bisa seperti ini")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("...\nfactory ClassName (DataType input) {\n    // aturan atau boundaries dari object\n   return ClassName._(validateStringNotEmpty(input).flatMap(validateStringNotEmpty));\n}\n...\n\n")])])]),n("p",[a._v("Selain itu, tidak menutup kemungkinan membuat aturan lebih dinamis dengan membuat variable/parameter/argument.")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("class ClassName extends ValueObject<String> {\n  @override\n  final Either<ValueFailure<String>, String> value;\n\n  static const maxStringLength = 1000;\n\n  factory ClassName(String input) {\n    return ClassName._(validateMaxStringLength(input, maxStringLength).flatMap(validateStringNotEmpty));\n  }\n\n  const ClassName._(this.value);\n}\n")])])]),n("h3",{attrs:{id:"rule"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rule"}},[a._v("#")]),a._v(" Rule")]),a._v(" "),n("ul",[n("li",[a._v("Penamaan Class Value Object harus memiliki kata domain-nya, misal: "),n("code",[a._v("ProductName, ProductDescription, ProductPrice")])]),a._v(" "),n("li",[a._v("Nama harus dalam "),n("strong",[a._v("Bahasa Inggris")])]),a._v(" "),n("li",[a._v("Penamaan menggunakan "),n("code",[a._v("camelCase")]),a._v(" dengan huruf kapital di awal karakter.")])]),a._v(" "),n("h2",{attrs:{id:"domain-model"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#domain-model"}},[a._v("#")]),a._v(" Domain (Model)")]),a._v(" "),n("p",[a._v("Mungkin lebih umum dapat dibilang seperti model. Merupakan class yang menampung data object.")]),a._v(" "),n("h3",{attrs:{id:"source-code-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#source-code-2"}},[a._v("#")]),a._v(" Source Code")]),a._v(" "),n("p",[a._v("Pembuatan Domain sama seperti pembuatan Object Class pada umumnya, tetapi pada arsitektur ini kami menggunakan "),n("a",{attrs:{href:"https://pub.dev/packages/freezed",target:"_blank",rel:"noopener noreferrer"}},[a._v("Freezed"),n("OutboundLink")],1),a._v(" untuk membantu dalam pembuatan "),n("strong",[a._v("immutable class")]),a._v(".")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("@freezed\nclass Product with _$Product {\n  const Product._();\n  const factory Product({\n    required UniqueId id,\n    required ProductName name,\n    required ProductDescription description,\n    required ProductPrice price,\n  }) = _Product;\n\n  // default domain\n  // dengan menggunakan factory pattern kita bisa mendefinisikan nilai default hanya dengan memanggil fungsi class factory.\n  factory Product.empty() => Product(\n        id: UniqueId(),\n        name: ProductName(''),\n        description: ProductDescription(''),\n        price: ProductPrice(0),\n      );\n\n  // menerima data domain valid (none) atau tidak (some)\n  // merupakan fungsi yang mengatur apakah atribut domain yang diinginkan valid (sesuai dengan aturan yang digunakan) atau tidak\n  // akan return data dari some(f) jika salah satu atribut tidak sesuai dengan aturan yang digunakan\n  // akan return none() jika SELURUH atribut domain yang ada di fungsi ini sesuai dengan aturan yang digunakan.\n  Option<ValueFailure<dynamic>> get failureOption {\n    return name.failureOrUnit\n        .andThen(description.failureOrUnit)\n        .andThen(price.failureOrUnit)\n        .fold(\n          (f) => some(f),\n          (_) => none(),\n        );\n  }\n}\n")])])]),n("h3",{attrs:{id:"rule-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rule-2"}},[a._v("#")]),a._v(" Rule")]),a._v(" "),n("ul",[n("li",[a._v("Penamaan Class Domain harus jelas, misal "),n("code",[a._v("Product, Transaction, User")])]),a._v(" "),n("li",[a._v("Nama harus dalam "),n("strong",[a._v("Bahasa Inggris")])]),a._v(" "),n("li",[a._v("Terdapat factory method "),n("code",[a._v("empty()")]),a._v(" pada setiap domain.")]),a._v(" "),n("li",[a._v("Jika ingin mengirim perubahan data Domain seperti fungsi "),n("code",[a._v("Create")]),a._v(" atau "),n("code",[a._v("Update")]),a._v(" ke remote atau local. Pada Domain "),n("strong",[a._v("WAJIB")]),a._v(" membuat fungsi "),n("code",[a._v("failureOption")])])]),a._v(" "),n("h3",{attrs:{id:"value"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#value"}},[a._v("#")]),a._v(" Value")]),a._v(" "),n("p",[a._v("Untuk mendapatkan nilai dari atributnya ada beberapa cara.")]),a._v(" "),n("ul",[n("li",[a._v("Menggunakan "),n("code",[a._v("getOrCrash()")]),a._v(". Fungsi ini menampilkan nilai dari atribut jika atribut tersebut "),n("strong",[a._v("sesuai")]),a._v(" dengan aturan atau bondary yang ditetapkan dan akan membuat aplikasi "),n("strong",[a._v("crash")]),a._v(" apabila aturan tersebut tidak valid.")]),a._v(" "),n("li",[a._v("Menggunakan "),n("code",[a._v("getOrElse(defaultValue)")]),a._v(". Fungsi ini mirip dengan "),n("code",[a._v("getOrCrash()")]),a._v(" hanya saja kita "),n("strong",[a._v("WAJIB")]),a._v(' memberikan "nilai pengganti" jika atribut mempunyai aturan yang invalid. Tipe data '),n("code",[a._v("defaultValue")]),a._v(" harus sama dengan value dari atributnya. Contoh: "),n("code",[a._v("productName.getOrElse('-'); productPrice.getOrElse(0)")]),a._v(".")])]),a._v(" "),n("p",[a._v("Selain itu dengan menggunakan atribut domain. Kita juga dapat mengecek salah satu atributnya apakah valid (sesuai dengan aturannya) atau tidak dengan menggunakan "),n("code",[a._v("isValid()")]),a._v(". Fungsi ini akan return "),n("code",[a._v("true")]),a._v(" atau "),n("code",[a._v("false")]),a._v(".")]),a._v(" "),n("h3",{attrs:{id:"create-new-domain"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#create-new-domain"}},[a._v("#")]),a._v(" Create New Domain")]),a._v(" "),n("p",[a._v("Jika ingin membuat boundary atau aturan baru lakukan langkah berikut.")]),a._v(" "),n("ol",[n("li",[a._v("Langung ke langkah ke-3 jika ingin memakai boundary yang sudah ada. Tambahkan factory class "),n("code",[a._v("ValueFailure<T>")]),a._v(" baru pada "),n("code",[a._v("root_folder/core/domain/failures.dart")]),a._v(" jika "),n("code",[a._v("ValueFailure<T>")]),a._v(" yang sudah ada tidak memungkinan untuk digunakan.")]),a._v(" "),n("li",[a._v("Buatlah logika untuk "),n("code",[a._v("ValueFailure<T>")]),a._v(" pada "),n("code",[a._v("root_folder/core/domain/value_validators.dart")]),a._v(".")]),a._v(" "),n("li",[a._v("Pastikan terminal ada di "),n("code",[a._v("core/")]),a._v(" folder dan jalankan perintah dibawah ini.")])]),a._v(" "),n("details",{staticClass:"custom-block details"},[n("summary",[a._v("build_runner")]),a._v(" "),n("p",[n("code",[a._v("flutter pub run build_runner build --delete-conflicting-outputs")])])]),a._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[a._v("Buat file "),n("code",[a._v("value_objects.dart")]),a._v(" pada "),n("code",[a._v("root_folder/domain/domain_name/value_objects.dart")]),a._v(" dan buat class "),n("code",[a._v("ValueObject")]),a._v(" sesuai dengan aturan yang ingin kalian tambahakan")]),a._v(" "),n("li",[a._v("Buat file domain kalian di folder "),n("code",[a._v("root_folder/domain/domain_name/domain_name.dart")])]),a._v(" "),n("li",[a._v("Pastikan terminal ada di "),n("code",[a._v("root_folder/")]),a._v(" dan jalankan perintah build_runner. (Seperti no-3).")])]),a._v(" "),n("h2",{attrs:{id:"domain-failure"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#domain-failure"}},[a._v("#")]),a._v(" Domain Failure")]),a._v(" "),n("p",[a._v("Pada saat ingin melakukan perubahan CRUD baik melalui remote (server) atau local terdapat kemungkinan terjadinya error yang mungkin terjadi berhubungan dengan Domain tersebut. Dengan memetakan kemungkinan failure yang akan terjadi dari segi developer akan lebih mudah untuk debug fungsi dan dari segi UI dapat dengan mudah menampilkan response error yang sesuai.")]),a._v(" "),n("h3",{attrs:{id:"source-code-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#source-code-3"}},[a._v("#")]),a._v(" Source Code")]),a._v(" "),n("p",[a._v("Contoh failure yang wajib ada di setiap Domain")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("@freezed\nabstract class DomainNameFailure with _$DomainNameFailure {\n  // failure yang tidak dapat kita duga, atau bisa digunakan sebagai default failure dari domain Product\n  const factory DomainNameFailure.unexpected() = _Unexpected;\n  \n  // merupakan default error jika terdapat fungsi yang berhubungan dengan remote data.\n  const factory DomainNameFailure.serverError(ApiFailure f) = _ServerError;\n}\n")])])]),n("p",[a._v("Kita bisa menambahkan failure lainnya yang berhubungan dengan Domain tersebut juga. Seperti contoh pada class "),n("code",[a._v("ProductFailure")]),a._v(" dibawah")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("@freezed\nabstract class ProductFailure with _$ProductFailure {\n    ...\n    const factory ProductFailure.unableToUpdate() = _UnableToUpdate;\n    const factory ProductFailure.unableToInsert() = _UnableToInsert;\n    const factory ProductFailure.unableToDelete() = _UnableToDelete;\n    const factory ProductFailure.notFound() = _NotFound;\n}\n\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),n("p",[a._v("Penggunaan domain failure tidak terpaku pada contoh diatas, domain failure dapat ditambahakan atau dikurangi sesuai dengan kebutuhan domain itu sendiri")])]),a._v(" "),n("h3",{attrs:{id:"rule-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rule-3"}},[a._v("#")]),a._v(" Rule")]),a._v(" "),n("ul",[n("li",[a._v("Penamaan Class Domain Failure memiliki kata pertama domain-nya. Contoh: "),n("code",[a._v("ProductFailure, TransactionFailure, PaymentFalure")]),a._v(".")]),a._v(" "),n("li",[a._v("Nama harus dalam "),n("strong",[a._v("Bahasa Inggris")])]),a._v(" "),n("li",[a._v("Penamaan method factory harus memiliki makna yang jelas (tidak ambigu).")])]),a._v(" "),n("h2",{attrs:{id:"interface-repository"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#interface-repository"}},[a._v("#")]),a._v(" Interface Repository")]),a._v(" "),n("p",[a._v("Pada contoh ini kami menggunakan "),n("code",[a._v("i_product_repository.dart")]),a._v(". Pada "),n("strong",[a._v("dart")]),a._v(" tidak ada interface, tetapi kita bisa mengakalinya dengan menggunakan fungsi "),n("code",[a._v("abstract class")]),a._v(". Class ini bertujuan untuk mengumpukan data yang berhubungan dengan "),n("strong",[a._v("domain")]),a._v("nya. Biasanya tempat untuk melakukan fungsi CRUD.")]),a._v(" "),n("h3",{attrs:{id:"source-code-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#source-code-4"}},[a._v("#")]),a._v(" Source Code")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("abstract class IProductRepository {\n  Future<Either<ProductFailure, KtList<Product>>> loadProducts();\n  Future<Either<ProductFailure, Product>> loadProduct(UniqueId id);\n  Future<Either<ProductFailure, Unit>> addProduct(Product product);\n  Future<Either<ProductFailure, Unit>> editProduct(Product product);\n  Future<Either<ProductFailure, Unit>> removeProduct(UniqueId id);\n}\n")])])]),n("h3",{attrs:{id:"rule-4"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rule-4"}},[a._v("#")]),a._v(" Rule")]),a._v(" "),n("ul",[n("li",[a._v("Penamaan Class harus sesuai format "),n("code",[a._v("IDomainNameRepository")]),a._v(" ganti "),n("code",[a._v("DomainName")]),a._v(" sesuai dengan nama domain. Contoh: "),n("code",[a._v("IProductRepository, ITransactionRepository, IPaymentRepository")]),a._v(".")]),a._v(" "),n("li",[a._v("Penamaan ditulis dalam "),n("strong",[a._v("Bahasa Inggris")]),a._v(".")]),a._v(" "),n("li",[a._v("Menggunakan format "),n("code",[a._v("<Either<DataLeft, DataRight>>")]),a._v(", dimana "),n("code",[a._v("DataLeft")]),a._v(" merupakan respon jika pada fungsi ini terpadat error, dan "),n("code",[a._v("DataRight")]),a._v(" merupakan respon jika fungsi ini berhasil dijalankan.")])])])}),[],!1,null,null,null);e.default=r.exports}}]);